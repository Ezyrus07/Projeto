/* DOKE Tablet + Layout Fixes — v20260209v1
   Objetivo: travar grids no tablet horizontal, centralizar conteúdo, evitar logo duplicada.
*/

/* ===== Perfil: centralização consistente no tablet (900-1024px) ===== */
@media (min-width: 900px) and (max-width: 1024px){
  body[data-page="perfil"] .dp-wrap{
    max-width: var(--dp-content-width, 1200px) !important;
    margin-left: auto !important;
    margin-right: auto !important;
    padding: 22px 18px 40px !important;
  }
}

/* ===== Perfil: desktop sempre centralizado considerando sidebar ===== */
@media (min-width: 1025px){
  body[data-page="perfil"] main.dp-wrap{
    width: auto !important;
    max-width: none !important;
    margin-left: var(--sidebar-width, 0px) !important;
    margin-right: 0 !important;
    display: flex !important;
    justify-content: center !important;
    align-items: flex-start !important;
    box-sizing: border-box !important;
    padding-left: clamp(16px, 2vw, 28px) !important;
    padding-right: clamp(16px, 2vw, 28px) !important;
  }

  body[data-page="perfil"] #dpRoot{
    width: min(100%, var(--dp-content-width, 1200px)) !important;
    max-width: var(--dp-content-width, 1200px) !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }
}

/* ===== Perfil: Tablet horizontal (4 colunas mídia) ===== */
@media (min-width: 900px) and (max-width: 1200px){
  body[data-page="perfil"] #dpGridPublicacoes{
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    gap: 10px !important;
  }
  body[data-page="perfil"] #dpGridReels.dp-grid--reels{
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    gap: 12px !important;
  }
  body[data-page="perfil"] #dpGridPortfolio{
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    gap: 10px !important;
  }
  /* Anúncios/serviços: 2 por linha no tablet landscape */
  body[data-page="perfil"] #dpGridServicos{
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    gap: 16px !important;
  }
}

/* ===== Perfil: Mobile/tablet geral (evita cards gigantes) ===== */
body[data-page="perfil"] #dpGridPublicacoes .dp-itemMedia,
body[data-page="perfil"] #dpGridPortfolio .dp-itemMedia{
  aspect-ratio: 1 / 1 !important;
  width: 100% !important;
  height: auto !important;
  object-fit: cover !important;
}
body[data-page="perfil"] .dp-reelMedia{
  aspect-ratio: 9 / 16 !important;
  object-fit: cover !important;
}

/* ===== Header/Sidebar: evitar marca duplicada ===== */
/* 768+ (desktop base): por padrão, mantém 1 marca visível */
@media (min-width: 768px) and (max-width: 1023px){
  /* Tablet retrato: marca no header (logo-desktop), não na sidebar */
  #logo-desktop{ display: block !important; }
  .sidebar-icones #logo{ display: none !important; }
}
@media (min-width: 1024px){
  /* Desktop / tablet largo: marca só na sidebar (fecha duplicação) */
  #logo-desktop{ display: none !important; }
  .sidebar-icones #logo{ display: block !important; }

  /* Alguns HTMLs acabam renderizando #logo-desktop dentro do header mesmo com sidebar aberta */
  .navbar-desktop #logo-desktop{ display: none !important; }
}

/* ===== Centralização: evitar “tudo puxado pra direita” no tablet ===== */
@media (min-width: 768px) and (max-width: 1200px){
  .navbar-desktop{ padding: 0 16px !important; }
  main{ padding: 28px 18px !important; }
}

/* ===== Grids gerais: impedir overflow lateral em tablet ===== */
@media (min-width: 768px) and (max-width: 1200px){
  .dp-grid, .grid, .categorias-grid, .videos-curtos-grid, .publicacoes-grid{
    min-width: 0;
  }
}

/* =========================================================
   TABLET (iPad/Android) — tratar como "mobile" sem afetar desktop
   Critério: tela grande + touch (pointer:coarse)
   ========================================================= */

@media (min-width: 1025px) and (max-width: 1400px) and (pointer: coarse){
  .navbar-desktop,
  .sidebar,
  .sidebar-icones,
  #sidebar,
  .menu-lateral,
  .nav-lateral{ display: none !important; }

  .navbar-mobile{ display: flex !important; }
  .bottom-nav{ display: flex !important; }

  main{
    margin-left: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    padding-left: 18px !important;
    padding-right: 18px !important;
    box-sizing: border-box !important;
  }

  .secao-busca,
  .categorias-container,
  .videos-container,
  .fotos-container,
  .anuncio-container,
  .para-voce-section,
  .pros-section{
    max-width: 100% !important;
    width: 100% !important;
  }

  body[data-page="home"] #galeria-dinamica{
    padding: 8px 0 10px !important;
    gap: 12px !important;
  }
  body[data-page="home"] #galeria-dinamica .dp-reelCard,
  body[data-page="home"] #galeria-dinamica .tiktok-card,
  body[data-page="home"] #galeria-dinamica .tiktok-card.is-skeleton{
    width: clamp(160px, calc((100vw - 120px) / 5), 210px) !important;
    min-width: clamp(160px, calc((100vw - 120px) / 5), 210px) !important;
    height: clamp(300px, 42vh, 360px) !important;
  }

  body[data-page="home"] #feed-global-container.feed-publicacoes-grid{
    gap: 14px !important;
    padding: 8px 2px 14px !important;
  }
  body[data-page="home"] #feed-global-container .feed-publicacao-card{
    flex: 0 0 clamp(210px, calc((100vw - 140px) / 4), 290px) !important;
    min-width: clamp(210px, calc((100vw - 140px) / 4), 290px) !important;
  }

  body[data-page="busca"] .search-layout{ grid-template-columns: 1fr !important; }
  body[data-page="busca"] .filters-sidebar{
    position: static !important;
    width: 100% !important;
    max-width: 100% !important;
    margin-bottom: 14px !important;
  }
  body[data-page="busca"] .busca-wrapper,
  body[data-page="busca"] .results-wrapper{
    width: 100% !important;
    max-width: 100% !important;
  }

  body[data-page="chat"] .coluna-lista{
    width: 100% !important;
    height: 100% !important;
    position: relative !important;
  }
  body[data-page="chat"] .coluna-chat{
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background: #fff !important;
    z-index: 9999 !important;
    transform: translateX(100%) !important;
    transition: transform .25s ease !important;
  }
  body[data-page="chat"].mobile-chat-open .coluna-chat{ transform: translateX(0) !important; }
  body[data-page="chat"].mobile-chat-open{ overflow: hidden !important; }
}
