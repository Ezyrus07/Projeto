<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Doke</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script type="module" src="script.js"></script>
</head>
<body>
    

    <div id="popup" class="popup">
        <div class="popup-content">
            <span class="close-btn" onclick="fecharPopup()">√ó</span>

            <p class="titulo">Entre na sua conta para aproveitar todos os recursos! :)</p>

            <a href="login.html"><button class="btn-login" onclick="realizarLogin()">Fazer login</button></a>

            <p class="criar">
                N√£o tem uma conta?
                <a href="cadastro.html">Criar conta</a>
            </p>
        </div>
    </div>

    <div id="cookieBanner" class="cookie-banner">
        <div class="cookie-container">
            <div class="cookie-text">
                A DOKE usa Cookies, pequenos arquivos para aprimorar e proteger a sua experi√™ncia :)
                <br>
                <strong>Clique aqui</strong> para mudar suas prefer√™ncias ou saiba mais na nossa 
                <a href="#">Termos de Uso e Pol√≠tica de Privacidade</a> e 
                <a href="#">Pol√≠tica de Cookies</a>.
            </div>
            <button id="acceptBtn" class="cookie-btn">Entendi</button>
        </div>
    </div>

    <header class="navbar-mobile">
        <div id="logo-mobile">
            <a href="index.html">
                <img src="" alt="Doke" onerror="this.src='https://placehold.co/100x40?text=Doke'">
            </a>           
        </div>
        
        <div class="mobile-controls" style="display: flex; align-items: center; gap: 15px;">
            <a href="login.html" class="entrar">Entrar</a>
            
            <button id="btn-menu-mobile" aria-label="Abrir Menu">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#2a5f90" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
        </div>
    </header>

    <div id="overlay-menu" onclick="fecharMenuMobile()"></div>

    <aside class="sidebar-icones">
        <div id="logo">
            <a href="index.html">
                <img src="assets/Imagens/doke-logo.png" alt="Logotipo da plataforma Doke">
            </a>
        </div>

        <div class="item">
            <a href="index.html"><img src="https://cdn-icons-png.flaticon.com/512/1946/1946436.png" class="icon azul" alt="In√≠cio">
            <span>In√≠cio</span></a>
        </div>
        <div class="item">
            <a href="explorar.html"><img src="https://cdn-icons-png.flaticon.com/512/622/622669.png" class="icon verde" alt="Explorar">
            <span>Explorar</span></a>
        </div>
        <div class="item">
            <a href="notificacoes.html"><img src="https://cdn-icons-png.flaticon.com/512/1827/1827392.png" class="icon azul" alt="Notifica√ß√µes">
            <span>Notifica√ß√µes</span></a>
        </div>
        <div class="item">
            <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" class="icon azul" alt="Mensagens">
            <a href="chat.html"><span>Mensagens</span></a>
        </div>
        <div class="item">
            <a href="comunidade.html"><img src="https://cdn-icons-png.flaticon.com/512/1144/1144760.png" class="icon verde" alt="Comunidades">
            <span>Comunidades</span></a>
        </div>
        <div class="item">
            <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" class="icon verde" alt="Comunidades">
            <a href="#" onclick="irParaMeuPerfil(event)"><span>Perfil</span></a>
        </div>
        <div class="item">
            <img src="https://cdn-icons-png.flaticon.com/512/56/56763.png" class="icon azul" alt="Mais">
            <a href="mais.html"><span>Mais</span></a>
        </div>
    </aside>


    <header class="navbar-desktop">
        <div id="logo-desktop">
            <a href="projeto.html">
                <img src="assets/Imagens/doke-logo.png" alt="Doke">
            </a>
        </div>
        <nav class="menu">
            <div class="cep-wrapper">
                <a href="#" class="cep" id="linkCep" onclick="toggleCep(event)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                    </svg>
                    <span id="textoCepSpan">Informe seu CEP</span>
                </a>

                <div class="cep-popup" id="boxCep">
                    <p>Digite seu CEP:</p>
                    <div class="cep-input-group">
                        <input type="text" id="inputCep" placeholder="00000-000" maxlength="9">
                        <button onclick="salvarCep()">OK</button>
                    </div>
                </div>
            </div>
            
            <a href="anunciar.html">Anuncie seu servi√ßo</a>
            <a href="comunidade.html ">Comunidades <span class="badge-novo">NOVO</span></a>
            <a href="novidades.html">Novidades</a>
        </nav>

        <div class="botoes-direita">
            <a href="login.html" class="entrar">Entrar</a>
            <a href="login.html">
            </a>
        </div>
    </header>

    <main>

<section class="stories-container" id="secStories" style="display: none;">
    
    <div class="stories-scroll" id="boxStories" style="justify-content: center;">
        
        <div class="story-item">
            <div class="story-ring add-story">
                <img id="imgSeuStory" src="https://placehold.co/150" alt="Seu Perfil">
                <span class="plus-icon"><i class='bx bx-plus'></i></span>
            </div>
            <span class="story-name">Seu story</span>
        </div>

        <div class="story-item">
            <div class="story-ring unseen">
                <img src="assets/Imagens/LOGO_DOKE_D.png" alt="Doke" style="padding: 2px;">
            </div>
            <span class="story-name" style="font-weight: 800;">DOKE</span>
        </div>

    </div>
</section>

        <section class="secao-busca">
            <div class="typing-container">
                <span class="static-text">Busque por</span>
                <span class="icon">‚ú®</span>
                <span class="dynamic-text" id="typewriter"></span>
                <span class="cursor">&nbsp;</span>
            </div>
            
            <div class="busca-wrapper" id="buscaWrapper">
                <div class="busca-input-container">
                    <input type="text" id="inputBusca" placeholder="Descreva o que voc√™ est√° procurando" autocomplete="off">
                    
                    <button class="btn-search-circle" onclick="document.querySelector('.btn-procurar').click()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                            <polyline points="12 5 19 12 12 19"></polyline>
                        </svg>
                    </button>
                </div>

                <div class="busca-dropdown" id="buscaDropdown">
                    <div class="busca-hint">
                        Busque por <i>marca, modelo, opcionais ou uma descri√ß√£o detalhada</i>
                    </div>
                    <div class="recentes-container" id="containerHistorico" style="display: none;">
                        <h4>Buscas recentes</h4>
                        <div id="listaRecentes"></div>
                        <div class="limpar-historico" onclick="limparHistorico(event)">Limpar hist√≥rico</div>
                    </div>
                </div>
            </div>
            
            <div class="botoes-busca">
                <button class="btn-procurar">Procurar servi√ßos</button>
                <a href="anunciar.html" target="_blank"><button class="btn-anunciar">Anunciar meu servi√ßo</button></a>
            </div>
        </section>

        <section class="categorias-container estilo-lojas">
                <h2 id="categorias-title">Categorias em destaque</h2>
                
                <div class="categoria-scroll" id="listaCategorias">
                    <div style="padding:0 20px; color:#999;">Carregando categorias...</div>
                </div>

                <div class="indicadores-paginacao">
                    <span class="dot ativo"></span>
                    <span class="dot"></span>
                </div>
            </section>
<section class="videos-container">
    <div class="videos-header-top">
        <h2 id="categorias-title2">Trabalhos & An√∫ncios Recentes</h2>
        <a href="explorar.html" class="ver-todos">Ver Galeria ></a>
    </div>

<div class="tiktok-scroll-wrapper" id="galeria-dinamica">
        <div style="padding: 20px; color: white; text-align: center;">
            <i class='bx bx-loader-alt bx-spin'></i> Carregando destaques...
        </div>
    </div>


    </div>


<div class="section-feed-title" style="padding: 0; margin-bottom: 25px; margin-top: 40px;">
        <h2 style="color:white; font-weight:bold; font-size: 1.3rem; margin:0;">
            O que est√° rolando na Comunidade
        </h2>
        <a href="comunidade.html" class="ver-todos" style="color:white;">Ver tudo ></a>
    </div>
    
    <div id="feed-global-container"></div>

</section>

<div class="anuncio-container" style="background: transparent; box-shadow: none; padding: 0;">
    
    <div class="top-bar">
        <h2 id="categorias-title" style="color:var(--cor0); margin-bottom: 20px;">NOVOS AN√öNCIOS:</h2>
    </div>

    <div class="filtros-container-premium">
        
        <div class="filtros-header-row">
            <h3 class="filtros-titulo"><i class='bx bx-filter'></i> Filtrar Resultados</h3>
            <button class="btn-toggle-filtros" onclick="toggleFiltrosExtras()">
                <i class='bx bx-slider-alt'></i> Filtros Avan√ßados
            </button>
        </div>

        <div id="filtrosExtras" class="filtros-expandidos">
            <div class="grid-extras">
                <div>
                    <label style="font-size:0.85rem; font-weight:600; margin-bottom:5px; display:block;">Pre√ßo M√°ximo</label>
                    <input type="number" class="input-premium" placeholder="R$ 0,00">
                </div>
                <div>
                    <label style="font-size:0.85rem; font-weight:600; margin-bottom:5px; display:block;">Ordenar Por</label>
                    <select class="input-premium">
                        <option>Mais Recentes</option>
                        <option>Menor Pre√ßo</option>
                        <option>Melhor Avalia√ß√£o</option>
                    </select>
                </div>
                <button class="btn-aplicar">Aplicar</button>
            </div>
        </div>

        <div class="filtros-localizacao">
            <span class="label-loc">Localiza√ß√£o</span>
            <div class="grid-loc">
                <select id="selectEstado" class="select-premium" onchange="carregarCidades()">
                    <option value="" disabled selected>Selecionar UF</option>
                    <option value="BA">Bahia</option>
                    <option value="SP">S√£o Paulo</option>
                </select>
                <select id="selectCidade" class="select-premium" onchange="carregarBairros()" disabled>
                    <option value="" disabled selected>Cidade</option>
                </select>
                <select id="selectBairro" class="select-premium" disabled>
                    <option value="" disabled selected>Bairro</option>
                </select>
            </div>
        </div>

        <div class="filtros-chips-scroll">
            <button class="chip-tag ativo" onclick="ativarChip(this)">Todos</button>
            <button class="chip-tag" onclick="ativarChip(this)"><i class='bx bx-trending-up'></i> Tend√™ncias</button>
            <button class="chip-tag" onclick="ativarChip(this)"><i class='bx bx-map'></i> Perto de voc√™</button>
            <button class="chip-tag" onclick="ativarChip(this)"><i class='bx bx-star'></i> Super Profissionais</button>
            <button class="chip-tag" onclick="ativarChip(this)"><i class='bx bx-time'></i> Rec√©m-chegados</button>
            <button class="chip-tag" onclick="ativarChip(this)"><i class='bx bx-badge-check'></i> Verificados</button>
        </div>

    </div>

    <div class="lista-cards-premium" id="feedAnuncios">
        
        <div style="padding: 20px; text-align: center; width: 100%; color: #777;">
            <i class='bx bx-loader-alt bx-spin' style="font-size: 2rem;"></i> Carregando an√∫ncios...
        </div>

    </div>
</div>

<script>
    function abrirGaleria() {
        alert("Aqui abriria um modal em tela cheia com todas as fotos!");
    }
</script>

    </div> </div>

    

        <section class="rodape-container">
            <h4 id="categorias-title3">
                Suporte exclusivo pra voc√™, a qualquer hora. Precisa de ajuda? 
                <a class="clique" href="#">Clique aqui!</a>
            </h4>
        </section>

        <section class="rodape-container2">
            <p class="sobre">
                A <strong id="sobreid">DOKE</strong> chegou para revolucionar o mercado de presta√ß√£o de servi√ßos, 
                consolidando-se em 2026 como refer√™ncia no setor. Oferecemos solu√ß√µes inovadoras e, acima de tudo, 
                seguran√ßa: atrav√©s do nosso sistema de <strong>Pagamento Garantido</strong>, o seu dinheiro fica 
                protegido sob nossa cust√≥dia e s√≥ √© liberado ao prestador ap√≥s a conclus√£o do servi√ßo. Al√©m disso voc√™ consegue acumular pontos e trocar por descontos e benef√≠cios exclusivos.
            </p>
        </section>

    </main>

<footer class="main-footer">
    <div class="footer-content">
        
        <div class="footer-col brand-col">
            <img src="assets/Imagens/doke-logo.png" alt="Doke Logo" class="footer-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
            <h2 class="footer-logo-text" style="display:none; color:white;">doke</h2>
            
            <p class="footer-desc">
                A DOKE revoluciona a presta√ß√£o de servi√ßos com o <strong>Pagamento Garantido</strong>. 
                Seu dinheiro protegido at√© a conclus√£o do servi√ßo. Seguran√ßa, inova√ß√£o e pontos exclusivos para voc√™.
            </p>

            <div class="social-links">
                <a href="#" aria-label="Instagram">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                </a>
                <a href="#" aria-label="LinkedIn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
                </a>
                <a href="#" aria-label="WhatsApp">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                </a>
            </div>
        </div>

        <div class="footer-col">
            <h4>Empresa</h4>
            <ul>
                <li><a href="#">Quem somos</a></li>
                <li><a href="#">Carreiras</a></li>
                <li><a href="#">Imprensa</a></li>
                <li><a href="#">Doke Pontos</a></li>
            </ul>
        </div>

        <div class="footer-col">
            <h4>Suporte</h4>
            <ul>
                <li><a href="#">Central de Ajuda</a></li>
                <li><a href="#">Seguran√ßa</a></li>
                <li><a href="#">Regras da Comunidade</a></li>
                <li><a href="#">Disputas e Reembolsos</a></li>
            </ul>
        </div>

        <div class="footer-col">
            <h4>Legal</h4>
            <ul>
                <li><a href="#">Termos de Uso</a></li>
                <li><a href="#">Pol√≠tica de Privacidade</a></li>
                <li><a href="#">LGPD</a></li>
            </ul>

            <div class="app-buttons">
                <button class="btn-app">
                    <span class="small-text">Baixe no</span>
                    <span class="big-text">Google Play</span>
                </button>
            </div>
        </div>

    </div>

    <div class="footer-bottom">
        <p>&copy; 2026 Doke Servi√ßos e Tecnologia. Todos os direitos reservados.</p>
        <div class="payment-icons">
            <span>üí≥ Cr√©dito</span>
            <span>üîí Pix Seguro</span>
        </div>
    </div>
</footer>


    <nav class="bottom-nav">
        <a href="index.html" class="item active"><img src="https://cdn-icons-png.flaticon.com/512/1946/1946436.png" class="icon azul" alt="In√≠cio"><span>In√≠cio</span></a>
        <a href="explorar.html" class="item"><img src="https://cdn-icons-png.flaticon.com/512/622/622669.png" class="icon verde"><span>Explorar</span></a>
        <a href="anunciar.html" class="item"><img src="assets/Imagens/icone-anunciar.png" class="icon azul"><span>Anunciar</span></a>
        <a href="notificacoes.html" class="item"><img src="https://cdn-icons-png.flaticon.com/512/1827/1827392.png" class="icon azul"><span>Notifica√ß√µes</span></a>
        <a href="meuperfil.html" class="item"><img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" class="icon verde"><span>Perfil</span></a>
    </nav>

    <div id="modalPlayerVideo" class="modal-video-overlay" style="display: none;">
    <span class="btn-fechar-video" onclick="fecharPlayerVideo()">&times;</span>
    <div class="video-wrapper">
        <video id="playerPrincipal" controls autoplay>
            <source src="" type="video/mp4">
            Seu navegador n√£o suporta v√≠deos.
        </video>
    </div>
</div>

<div id="modalGaleria" class="galeria-overlay" style="display: none;" onclick="fecharGaleria(event)">
    <span class="btn-fechar-galeria" onclick="fecharGaleria(event)">&times;</span>
    
    <div class="nav-seta esq" onclick="mudarImagem(-1)">
        <i class='bx bx-chevron-left'></i>
    </div>

    <div class="galeria-conteudo">
        <img id="imgExpandida" src="" alt="Foto Expandida">
    </div>

    <div class="nav-seta dir" onclick="mudarImagem(1)">
        <i class='bx bx-chevron-right'></i>
    </div>

    <div class="galeria-thumbnails" id="areaThumbnails">
        </div>
</div>

<div id="modalSolicitacao" class="modal-overlay" style="display: none; z-index: 15000; align-items: center; justify-content: center;">
    <div class="modal-card" style="max-width: 500px; width: 90%;">
        <div class="modal-header">
            <h3>Solicitar Or√ßamento</h3>
            <button onclick="fecharModalSolicitacao()" class="btn-close-modal">√ó</button>
        </div>
        <div class="modal-body">
            <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;">
                Para agilizar, descreva o que voc√™ precisa e responda √†s perguntas do profissional.
            </p>
            
            <input type="hidden" id="solicitacao_idPrestador">
            <input type="hidden" id="solicitacao_nomePrestador">
            <input type="hidden" id="solicitacao_servicoRef">

            <div class="form-group">
                <label style="font-weight: 600; font-size: 0.9rem;">Descri√ß√£o do Pedido <span style="color: red;">*</span></label>
                <textarea id="solicitacao_descricao" class="input-modern" rows="4" placeholder="Ex: Preciso pintar uma sala de 20m¬≤, paredes brancas..." style="width:100%; border:1px solid #ddd; padding:10px; border-radius:8px;"></textarea>
            </div>

            <div id="areaPerguntasExtras" style="display: flex; flex-direction: column; gap: 15px; margin-top: 15px;">
                </div>

        </div>
        <div class="modal-footer" style="background: #f9f9f9; padding: 15px; border-top: 1px solid #eee; display: flex; justify-content: flex-end; gap: 10px;">
            <button onclick="fecharModalSolicitacao()" style="padding: 10px 20px; border: 1px solid #ddd; background: white; border-radius: 6px; cursor: pointer;">Cancelar</button>
            <button onclick="enviarPedidoFinal()" style="padding: 10px 20px; border: none; background: #2ecc71; color: white; border-radius: 6px; cursor: pointer; font-weight: bold;">Enviar Solicita√ß√£o</button>
        </div>
    </div>
</div>

<style>
    /* CSS DO PLAYER DE V√çDEO */
    .modal-video-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.95); /* Fundo preto quase total */
        z-index: 10000;
        display: flex; justify-content: center; align-items: center;
        backdrop-filter: blur(5px);
        animation: fadeIn 0.3s ease;
    }
    .video-wrapper {
        width: 90%; max-width: 500px; /* Tamanho estilo TikTok/Reels */
        aspect-ratio: 9 / 16;
        background: #000;
        border-radius: 12px; overflow: hidden;
        box-shadow: 0 0 50px rgba(0,0,0,0.5);
    }
    .video-wrapper video {
        width: 100%; height: 100%; object-fit: contain;
    }
    .btn-fechar-video {
        position: absolute; top: 20px; right: 30px;
        color: white; font-size: 40px; cursor: pointer; z-index: 10001;
        transition: 0.2s;
    }
    .btn-fechar-video:hover { color: #ff4444; transform: scale(1.1); }
</style>

<script>
    (function() {
        // 1. Verifica login no LocalStorage (√© instant√¢neo)
        const logado = localStorage.getItem('usuarioLogado') === 'true';
        const areaStories = document.getElementById('secStories');
        
        // 2. For√ßa a exibi√ß√£o dos stories se estiver logado
        if (areaStories) {
            if (logado) {
                areaStories.style.display = 'block'; // Mostra!
                
                // Tenta carregar a foto do perfil
                try {
                    const perfil = JSON.parse(localStorage.getItem('doke_usuario_perfil'));
                    if (perfil && perfil.foto) {
                        const img = document.getElementById('imgSeuStory');
                        if(img) img.src = perfil.foto;
                    }
                } catch(e) { console.log("Perfil vazio"); }
                
            } else {
                areaStories.style.display = 'none'; // Garante que esconde se n√£o logado
            }
        }

        // 3. Atualiza bot√£o de Entrar/Perfil (caso o script.js falhe)
        const container = document.querySelector('.botoes-direita');
        if (container) {
            if (logado) {
                // Se j√° tem HTML de perfil, n√£o mexe. Se tem bot√£o "Entrar", troca.
                if(container.innerHTML.includes('Entrar')) {
                    container.innerHTML = `
                        <div class="profile-container">
                             <img src="${localStorage.getItem('doke_usuario_perfil') ? JSON.parse(localStorage.getItem('doke_usuario_perfil')).foto || 'https://i.pravatar.cc/150?img=12' : 'https://i.pravatar.cc/150?img=12'}" 
                                  class="profile-img-btn" onclick="toggleDropdown(event)" 
                                  style="width:40px; height:40px; border-radius:50%; cursor:pointer; border:2px solid #ddd;">
                             </div>`;
                }
            } else {
                container.innerHTML = `<a href="login.html" class="entrar">Entrar</a>`;
            }
        }
    })();
</script>
</body>
</html>