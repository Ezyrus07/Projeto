<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mensagens - Doke</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>/* ======================================================
   CHAT DOKE - DESIGN MODERNO (SEM CARA DE WHATSAPP)
   ====================================================== */

/* 1. Ajuste Geral da P√°gina */
body.chat-page {
    background-color: #f4f6f8; /* Fundo cinza suave */
    height: 100vh;
    display: flex;
    flex-direction: row;
    overflow: hidden; /* Remove rolagem da janela inteira */
}

/* 2. Layout Principal (ocupa todo o espa√ßo ap√≥s sidebar) */
/* 2. Layout Principal (CORRIGIDO) */
.chat-layout {
    display: flex;
    height: 100vh;
    width: auto; /* Deixa o width autom√°tico para respeitar a margem */
    
    /* O SEGREDO EST√Å AQUI: Empurra o conte√∫do para a direita */
    margin-left: var(--sidebar-width); 
    
    padding: 0;
    transition: margin-left 0.3s ease; /* Anima√ß√£o suave se a sidebar mudar */
}

/* Responsividade: No celular a sidebar some, ent√£o a margem zera */
@media (max-width: 768px) {
    .chat-layout {
        margin-left: 0 !important;
    }
}

/* --- COLUNA ESQUERDA: LISTA DE CONTATOS --- */
.contacts-panel {
    width: 380px;
    background: white;
    border-right: 1px solid #eef0f2;
    display: flex;
    flex-direction: column;
    z-index: 10;
}

.panel-header {
    padding: 25px 20px 15px 20px;
    border-bottom: 1px solid #f5f5f5;
}
.panel-header h2 {
    font-size: 1.5rem; color: var(--cor2); margin: 0 0 15px 0;
}

.search-box {
    background: #f4f6f8;
    border-radius: 12px;
    padding: 10px 15px;
    display: flex; align-items: center; gap: 10px;
    border: 1px solid transparent;
    transition: 0.3s;
}
.search-box:focus-within {
    background: white; border-color: var(--cor2); box-shadow: 0 4px 10px rgba(42,95,144,0.1);
}
.search-box input {
    border: none; background: transparent; outline: none; width: 100%;
    color: #333; font-weight: 500;
}
.search-box i { color: #999; font-size: 1.2rem; }

/* Lista */
.contacts-list {
    flex: 1; overflow-y: auto;
    padding: 10px;
}

.contact-card {
    display: flex; align-items: center; gap: 15px;
    padding: 15px; border-radius: 12px;
    cursor: pointer; transition: 0.2s; margin-bottom: 5px;
}
.contact-card:hover { background-color: #f9fafb; }

/* Contato Ativo (Estilo Doke) */
.contact-card.active {
    background-color: #eef6fc; /* Azul bem clarinho */
}
.contact-card.active h4 { color: var(--cor2); }

/* Avatar */
.img-wrap { position: relative; width: 50px; height: 50px; }
.img-wrap img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
.img-wrap .status {
    position: absolute; bottom: 0; right: 0; width: 12px; height: 21px;
    border-radius: 50%; border: 2px solid white;
}
.status.online { background: #00b894; }
.status.offline { background: #b2bec3; }

/* Info Texto */
.info { flex: 1; min-width: 0; }
.info .top { display: flex; justify-content: space-between; margin-bottom: 4px; }
.info h4 { margin: 0; font-size: 1rem; color: #333; font-weight: 600; }
.info .date { font-size: 0.75rem; color: #aaa; }
.info .preview {
    margin: 0; font-size: 0.85rem; color: #666;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.badge {
    float: right; background: var(--cor3); color: white;
    font-size: 0.7rem; padding: 2px 8px; border-radius: 10px; font-weight: 700;
}


/* --- COLUNA DIREITA: WORKSPACE DO CHAT --- */
.chat-workspace {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: white;
    position: relative;
}

/* Header Superior (Topo) */
.chat-topbar {
    height: 80px; /* Mesma altura da navbar padr√£o */
    padding: 0 30px;
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid #f0f0f0;
    background: white;
}

.user-profile { display: flex; align-items: center; gap: 15px; }
.user-profile img { width: 45px; height: 45px; border-radius: 50%; }
.user-profile h3 { margin: 0; font-size: 1.1rem; color: #2d3436; }
.status-text { font-size: 0.85rem; color: #00b894; font-weight: 500; }

.chat-tools { display: flex; align-items: center; gap: 15px; }
.btn-pay-header {
    background: var(--cor0); /* Verde Doke */
    color: white; border: none; padding: 10px 20px;
    border-radius: 30px; font-weight: 600; cursor: pointer;
    display: flex; align-items: center; gap: 6px;
    box-shadow: 0 4px 12px rgba(11, 119, 104, 0.2);
    transition: 0.2s;
}
.btn-pay-header:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(11, 119, 104, 0.3); }

.icon-tool {
    background: #f4f6f8; border: none; width: 40px; height: 40px;
    border-radius: 50%; color: #666; font-size: 1.2rem; cursor: pointer;
    display: flex; align-items: center; justify-content: center; transition: 0.2s;
}
.icon-tool:hover { background: #e0e4e8; color: var(--cor2); }

/* --- √ÅREA DE MENSAGENS (Aqui acontece a m√°gica do design) --- */
.messages-container {
    flex: 1;
    padding: 30px;
    overflow-y: auto;
    background: linear-gradient(180deg, var(--cor2) 0%, var(--cor4) 200px); 
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.day-divider { text-align: center; margin: 10px 0; opacity: 0.8; }
.day-divider span {
    background: #eef2f5; color: #7f8c8d; padding: 5px 15px;
    border-radius: 20px; font-size: 0.8rem; font-weight: 500;
}

/* Estilo dos Bal√µes */
.message { display: flex; width: 100%; margin-bottom: 5px; }
.message.sent { justify-content: flex-end; }
.message.received { justify-content: flex-start; }

.msg-content {
    max-width: 65%;
    padding: 12px 18px;
    position: relative;
    font-size: 1rem;
    line-height: 1.5;
    box-shadow: 0 2px 5px rgba(0,0,0,0.03);
}

/* Bal√£o Recebido (Branco) */
.message.received .msg-content {
    background: white;
    color: #2d3436;
    border-radius: 18px 18px 18px 4px; /* Canto quadrado embaixo na esq */
    border: 1px solid #eee;
}

/* Bal√£o Enviado (AZUL DOKE - Identidade Visual) */
.message.sent .msg-content {
    background: var(--cor2); /* Azul Doke */
    color: white;
    border-radius: 18px 18px 4px 18px; /* Canto quadrado embaixo na dir */
    box-shadow: 0 4px 10px rgba(42, 95, 144, 0.2);
}

.timestamp {
    display: block; font-size: 0.7rem; margin-top: 5px;
    text-align: right; opacity: 0.8;
}

/* --- CARD DE PAGAMENTO (Estilo Widget) --- */
.widget-payment { justify-content: center; }
.payment-card {
    background: white;
    width: 280px;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    border: 1px solid #eef0f2;
}

.card-header {
    background: linear-gradient(135deg, var(--cor0), #0e9683);
    color: white; padding: 12px; font-size: 0.9rem; font-weight: 600;
    display: flex; align-items: center; gap: 8px;
}
.card-body { padding: 20px; text-align: center; }
.card-body h1 { margin: 0 0 5px 0; color: var(--cor2); font-size: 1.8rem; }
.card-body p { color: #888; margin-bottom: 20px; font-size: 0.9rem; }
.card-body button {
    width: 100%; padding: 12px; background: var(--cor2);
    color: white; border: none; border-radius: 8px; font-weight: 700;
    cursor: pointer; transition: 0.2s;
}
.card-body button:hover { background: #1a4b7c; }

.card-footer {
    background: #f9fbfd; padding: 10px; border-top: 1px solid #eee;
    font-size: 0.75rem; color: #999; display: flex; justify-content: space-between;
}


/* --- √ÅREA DE INPUT --- */
.input-area {
    padding: 20px 30px;
    background: white;
    border-top: 1px solid #f0f0f0;
    display: flex; align-items: center; gap: 15px;
}

.input-wrapper {
    flex: 1; position: relative;
    background: #f4f6f8; border-radius: 30px;
    display: flex; align-items: center;
}
.input-wrapper input {
    flex: 1; background: transparent; border: none;
    padding: 15px 20px; outline: none; font-family: var(--fonte-padrao);
}

.attach-btn, .mic-btn, .send-btn {
    border: none; cursor: pointer; display: flex; align-items: center; justify-content: center;
}
.attach-btn { background: transparent; font-size: 1.4rem; color: #999; }
.attach-btn:hover { color: var(--cor2); }

.mic-btn { background: transparent; font-size: 1.3rem; color: #999; padding-right: 15px; }

.send-btn {
    width: 50px; height: 50px; border-radius: 50%;
    background: var(--cor2); color: white; font-size: 1.4rem;
    box-shadow: 0 4px 10px rgba(42, 95, 144, 0.3);
    transition: 0.2s;
}
.send-btn:hover { transform: scale(1.1); background: var(--cor0); }

/* Responsividade Mobile */
@media (max-width: 768px) {
    .chat-layout { flex-direction: column; }
    .contacts-panel {
        display: none; /* Em mobile, faria l√≥gica de troca de tela */
        width: 100%; height: 100%;
    }
    .chat-workspace { width: 100%; height: 100%; }
    .chat-topbar { padding: 0 15px; height: 70px; }
    .messages-container { padding: 15px; }
    .input-area { padding: 15px; }
    
    /* Para mostrar a lista no mobile, voc√™ precisaria de um estado JS */
}</style>
</head>
<body class="chat-page">

    <aside class="sidebar-icones">
        <div id="logo">
            <a href="index.html">
                <img src="assets/Imagens/doke-logo.png" alt="Logotipo da plataforma Doke">
            </a>
        </div>

        <div class="item">
            <a href="index.html"><img src="https://cdn-icons-png.flaticon.com/512/1946/1946436.png" class="icon azul" alt="In√≠cio">
            <span>In√≠cio</span></a>
        </div>
        <div class="item">
            <a href="explorar.html"><img src="https://cdn-icons-png.flaticon.com/512/622/622669.png" class="icon verde" alt="Explorar">
            <span>Explorar</span></a>
        </div>
        <div class="item">
            <a href="notificacoes.html"><img src="https://cdn-icons-png.flaticon.com/512/1827/1827392.png" class="icon azul" alt="Notifica√ß√µes">
            <span>Notifica√ß√µes</span></a>
        </div>
        <div class="item">
            <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" class="icon azul" alt="Mensagens">
            <a href="chat.html"><span>Mensagens</span></a>
        </div>
        <div class="item">
            <a href="comunidade.html"><img src="https://cdn-icons-png.flaticon.com/512/1144/1144760.png" class="icon verde" alt="Comunidades">
            <span>Comunidades</span></a>
        </div>
        <div class="item">
            <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" class="icon verde" alt="Comunidades">
            <a href="meuperfil.html"><span>Perfil</span></a>
        </div>
        <div class="item">
            <img src="https://cdn-icons-png.flaticon.com/512/56/56763.png" class="icon azul" alt="Mais">
            <a href="mais.html"><span>Mais</span></a>
        </div>
    </aside>


    <header class="navbar-desktop">
        <div id="logo-desktop">
            <a href="projeto.html">
                <img src="assets/Imagens/doke-logo.png" alt="Doke">
            </a>
        </div>
        <nav class="menu">
            <div class="cep-wrapper">
                <a href="#" class="cep" id="linkCep" onclick="toggleCep(event)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                    </svg>
                    <span id="textoCepSpan">Informe seu CEP</span>
                </a>

                <div class="cep-popup" id="boxCep">
                    <p>Digite seu CEP:</p>
                    <div class="cep-input-group">
                        <input type="text" id="inputCep" placeholder="00000-000" maxlength="9">
                        <button onclick="salvarCep()">OK</button>
                    </div>
                </div>
            </div>
            
            <a href="anunciar.html">Anuncie seu servi√ßo</a>
            <a href="#">Comunidades <span class="badge-novo">NOVO</span></a>
            <a href="novidades.html">Novidades</a>
            <a href="ajuda.html">Ajuda</a>
        </nav>

        <div class="botoes-direita">
            <a href="login.html" class="entrar">Entrar</a>
            <a href="login.html">
            </a>
        </div>
    </header>

    <header class="navbar-mobile">
        <div id="logo-mobile"><a href="index.html"><img src="assets/Imagens/doke-logo.png" alt="Doke"></a></div>
        <button id="btn-menu-mobile"><i class='bx bx-menu' style="font-size: 28px; color: var(--cor2);"></i></button>
    </header>
    <div id="overlay-menu"></div>

    <main class="chat-layout">
        
        <section class="contacts-panel">
            <div class="panel-header">
                <h2>Mensagens</h2>
                <div class="search-box">
                    <i class='bx bx-search'></i>
                    <input type="text" placeholder="Pesquisar conversa...">
                </div>
            </div>

            <div class="contacts-list">
                <div class="contact-card active" onclick="selecionarContato(this, 'Marcos Pintor')">
                    <div class="img-wrap">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User">
                        <span class="status online"></span>
                    </div>
                    <div class="info">
                        <div class="top">
                            <h4>Marcos Pintor</h4>
                            <span class="date">10:42</span>
                        </div>
                        <p class="preview">Combinado! Pode deixar que levo...</p>
                    </div>
                </div>

                <div class="contact-card unread" onclick="selecionarContato(this, 'Ana Eletricista')">
                    <div class="img-wrap">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User">
                        <span class="status online"></span>
                    </div>
                    <div class="info">
                        <div class="top">
                            <h4>Ana Eletricista</h4>
                            <span class="date">Ontem</span>
                        </div>
                        <p class="preview"><i class='bx bx-microphone'></i> √Åudio (0:15)</p>
                        <span class="badge">2</span>
                    </div>
                </div>

                <div class="contact-card" onclick="selecionarContato(this, 'Jorge Montador')">
                    <div class="img-wrap">
                        <img src="https://randomuser.me/api/portraits/men/85.jpg" alt="User">
                        <span class="status offline"></span>
                    </div>
                    <div class="info">
                        <div class="top">
                            <h4>Jorge Montador</h4>
                            <span class="date">Seg</span>
                        </div>
                        <p class="preview">Pagamento confirmado ‚úÖ</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="chat-workspace">
            
            <div class="chat-topbar">
                <div class="user-profile">
                    <img src="https://randomuser.me/api/portraits/men/32.jpg" id="chatAvatar">
                    <div class="details">
                        <h3 id="chatName">Marcos Pintor</h3>
                        <span class="status-text">Online agora</span>
                    </div>
                </div>
                <div class="chat-tools">
                    <button class="btn-pay-header" onclick="abrirModalPagamento()">
                        <i class='bx bx-dollar-circle'></i> Pagar
                    </button>
                    <button class="icon-tool"><i class='bx bx-phone'></i></button>
                    <button class="icon-tool"><i class='bx bx-video'></i></button>
                    <button class="icon-tool"><i class='bx bx-dots-vertical-rounded'></i></button>
                </div>
            </div>

            <div class="messages-container" id="messagesArea">
                <div class="day-divider"><span>Hoje</span></div>

                <div class="message received">
                    <div class="msg-content">
                        Ol√°! Tudo bem? Sobre o or√ßamento da sala, fica em R$ 450,00 com o material incluso.
                        <span class="timestamp">10:30</span>
                    </div>
                </div>

                <div class="message sent">
                    <div class="msg-content">
                        Opa Marcos! O valor est√° √≥timo. Voc√™ consegue vir amanh√£?
                        <span class="timestamp">10:32 <i class='bx bx-check-double'></i></span>
                    </div>
                </div>

                <div class="message received widget-payment">
                    <div class="payment-card">
                        <div class="card-header">
                            <i class='bx bx-wallet'></i> Solicita√ß√£o de Pagamento
                        </div>
                        <div class="card-body">
                            <h1>R$ 450,00</h1>
                            <p>Servi√ßo: Pintura Sala</p>
                            <button onclick="abrirModalPagamento()">Pagar Agora</button>
                        </div>
                        <div class="card-footer">
                            <span>Seguran√ßa Doke Pay üîí</span>
                            <span class="timestamp">10:40</span>
                        </div>
                    </div>
                </div>

                <div class="message sent">
                    <div class="msg-content">
                        Combinado! Pode deixar que levo a tinta se precisar de algo espec√≠fico.
                        <span class="timestamp">10:42 <i class='bx bx-check-double'></i></span>
                    </div>
                </div>
            </div>

            <div class="input-area">
                <button class="attach-btn"><i class='bx bx-paperclip'></i></button>
                <div class="input-wrapper">
                    <input type="text" id="msgInput" placeholder="Digite sua mensagem...">
                    <button class="mic-btn"><i class='bx bx-microphone'></i></button>
                </div>
                <button class="send-btn" onclick="enviarMensagem()"><i class='bx bxs-send'></i></button>
            </div>

        </section>
    </main>

    

    <nav class="bottom-nav">
        <a href="index.html" class="item"><img src="https://cdn-icons-png.flaticon.com/512/1946/1946436.png" class="icon azul"><span>In√≠cio</span></a>
        <a href="feed.html" class="item"><img src="https://cdn-icons-png.flaticon.com/512/622/622669.png" class="icon verde"><span>Explorar</span></a>
        <a href="#" class="item"><img src="https://cdn-icons-png.flaticon.com/512/1827/1827392.png" class="icon azul"><span>Notif.</span></a>
        <a href="#" class="item active"><img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" class="icon azul"><span>Msgs</span></a>
        <a href="#" class="item"><img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" class="icon verde"><span>Perfil</span></a>
    </nav>

    

    <script>
        // JS B√°sico para enviar e simular intera√ß√£o
        function enviarMensagem() {
            const input = document.getElementById('msgInput');
            const area = document.getElementById('messagesArea');
            if(input.value.trim() !== "") {
                const html = `
                    <div class="message sent">
                        <div class="msg-content">
                            ${input.value}
                            <span class="timestamp">${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})} <i class='bx bx-time'></i></span>
                        </div>
                    </div>`;
                area.insertAdjacentHTML('beforeend', html);
                input.value = "";
                area.scrollTop = area.scrollHeight;
            }
        }
        document.getElementById('msgInput').addEventListener('keypress', (e) => {
            if(e.key === 'Enter') enviarMensagem();
        });
        function selecionarContato(el, nome) {
            document.querySelectorAll('.contact-card').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('chatName').innerText = nome;
        }
        function abrirModalPagamento() { alert('Iniciando pagamento seguro...'); }
        
        // Menu Mobile Toggle
        const btnMenu = document.getElementById('btn-menu-mobile');
        const sidebar = document.querySelector('.sidebar-icones');
        const overlay = document.getElementById('overlay-menu');
        function toggleMenu() {
            sidebar.classList.toggle('menu-aberto');
            document.body.classList.toggle('menu-ativo');
            overlay.style.display = sidebar.classList.contains('menu-aberto') ? 'block' : 'none';
        }
        if(btnMenu) btnMenu.addEventListener('click', toggleMenu);
        if(overlay) overlay.addEventListener('click', toggleMenu);
    </script>
</body>
</html>